import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24yCiMgY29kaW5nPXV0Zi04CiMgY29kZSBieSBTYXl5ZWQgWmFrYXJ5YQojIG15IGZhY2Vib29rICggaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NheXllcy4zMDIgKQoKIyAgICAgIChDKSBDb3B5cmlnaHQgMDA3IEF1dGhlbnRpYyBFeHBsb2l0CiMgICAgICBSZWJ1aWxkIENvcHlyaWdodCBDYW4ndCBtYWtlIHUgcmVhbCBwcm9ncmFtbWVyOikKIyAgICAgIENvZGVkIEJ5IFNheXllZCBaYWthcnlhCgppbXBvcnQgb3MKdHJ5OgogICAgaW1wb3J0IHJlcXVlc3RzCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHByaW50ICdcbiBbw5ddIHJlcXVlc3RzIG1vZHVsZSBub3QgaW5zdGFsbGVkIS4uLlxuJwogICAgb3Muc3lzdGVtKCdwaXAyIGluc3RhbGwgcmVxdWVzdHMnKQoKdHJ5OgogICAgaW1wb3J0IGNvbmN1cnJlbnQuZnV0dXJlcwpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBwcmludCAnXG4gW8OXXSBmdXR1cmUgbW9kdWxlIG5vdCBpbnN0YWxsZWQhLi4uXG4nCiAgICBvcy5zeXN0ZW0oJ3BpcDIgaW5zdGFsbCBmdXR1cmVzJykKCnRyeToKICAgIGltcG9ydCBiczQKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcHJpbnQgJ1xuIFvDl10gYnM0IG1lZHVsZSBub3QgaW5zdGFsbGVkIS4uLlxuJwogICAgb3Muc3lzdGVtKCdwaXAyIGluc3RhbGwgYnM0JykKCmltcG9ydCByZXF1ZXN0cywgb3MsIHJlLCBiczQsIHN5cywganNvbiwgdGltZSwgcmFuZG9tLCBkYXRldGltZQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFlheWFuR2FudGVuZwpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cApjdCA9IGRhdGV0aW1lLm5vdygpCm4gPSBjdC5tb250aApidWxhbiA9IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddCnRyeToKICAgIGlmIG4gPCAwIG9yIG4gPiAxMjoKICAgICAgICBleGl0KCkKICAgIG5UZW1wID0gbiAtIDEKZXhjZXB0IFZhbHVlRXJyb3I6CiAgICBleGl0KCkKCmN1cnJlbnQgPSBkYXRldGltZS5ub3coKQp0YSA9IGN1cnJlbnQueWVhcgpidSA9IGN1cnJlbnQubW9udGgKaGEgPSBjdXJyZW50LmRheQpvcCA9IGJ1bGFuW25UZW1wXQpyZWxvYWQoc3lzKQpzeXMuc2V0ZGVmYXVsdGVuY29kaW5nKCd1dGYtOCcpCiMjIyBXQVJOQSBSQU5ET00gIyMjClAgPSAnXHgxYlsxOzk3bScgIyBXSElURQpNID0gJ1x4MWJbMTs5MW0nICMgUkVECkggPSAnXHgxYlsxOzkybScgIyBHUkVFTgpLID0gJ1x4MWJbMTs5M20nICMgWUVMTE9XCkIgPSAnXHgxYlsxOzk0bScgIyBCSVJVClUgPSAnXHgxYlsxOzk1bScgIyBVTkdVCk8gPSAnXHgxYlsxOzk2bScgIyBCSVJVIE1VREEKTiA9ICdceDFiWzBtJyAgICAjIFdBUk5BIE1BVEkKbXlfY29sb3IgPSBbCiBQLCBNLCBILCBLLCBCLCBVLCBPLCBOXQp3YXJuYSA9IHJhbmRvbS5jaG9pY2UobXlfY29sb3IpCiMgIFNheXllZCBaYWthcnlhIEJhY2hhICAjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPgoKb2sgPSBbXQpjcCA9IFtdCmlkID0gW10KdXNlciA9IFtdCmxvb3AgPSAwCnhpX2ppbXBpbnggPSAnMTcxNDAwMDk4NTQ1NjM5OScKa29oID0gJzEwMDAwNTM5NTQxMzgwMCcKdXJsID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIKaG9ldGFuayA9IHJhbmRvbS5jaG9pY2UoWydUaGUgcGVyc29uIHdobyBwb3N0ZWQgaXMgaGFuZHNvbWU6KScsICdMbyBmdWNrZWQgdXAgOnYnLCAnTmV2ZXIgc3VycmVudG9kIHRla2VudG9kIGtlbnRvZDp2J10pCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyeSIsICIwMyI6ICJNYXJjaCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNYXkiLCAiMDYiOiAiSnVuZSIsICIwNyI6ICJKdWx5IiwgIjA4IjogIkF1Z3VzdCIsICIwOSI6ICJTZXB0ZW1iZXIiLCAiMTAiOiAiT2N0b2JlciIsICIxMSI6ICJOb3ZlbWJlciIsICIxMiI6ICJEZWNlbWJlciJ9CgojIGxlbXBhbmtra2tra2trCmRlZiBqYWxhbih6KToKICAgIGZvciBlIGluIHogKyAnXG4nOgogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZSkKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICB0aW1lLnNsZWVwKDAuMDMpCgpkZWYgdG9kKCk6CiAgICB0aXRpayA9IFsnXHgxYlsxOzkybS4gICAnLCAnXHgxYlsxOzkzbS4uICAnLCAnXHgxYlsxOzk2bS4uLiAnLCdceDFiWzE7OTJtLiAgICcsICdceDFiWzE7OTNtLi4gICcsICdceDFiWzE7OTZtLi4uICddCiAgICBmb3IgeCBpbiB0aXRpazoKICAgICAgICBwcmludCAnXHIgJXNbJXMrJXNdIG1lbmdoYXB1cyB0b2tlbiAlcyclKE4sTSxOLHgpLAogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIHRpbWUuc2xlZXAoMSkKCiMgbG9nbwpsb2dvID0gIiIiCl9fX19fIF9fXyBfXyAgX18gX19fX18gX19fIF9fXyAgCiB8XyAgIF98XyBffCAgXC8gIHxfICAgX3wgX198ICAgXCAKICAgfCB8ICB8IHx8IHxcL3wgfCB8IHwgfCBffHwgfCkgfAogICB8X3wgfF9fX3xffCAgfF98IHxffCB8X19ffF9fXy8gCiAgICAgXHgxYlsxOzk3bSBBdXRob3IgICBcMDMzWzMxOzFtOiAgXDAzM1szMm1UaW1UZWQKICAgICBceDFiWzE7OTdtIFR5cGUgICAgIFwwMzNbMzE7MW06ICBcMDMzWzMybUJydXRlRm9yY2UKICAgICBceDFiWzE7OTdtIFZlcnNpb24gIFwwMzNbMzE7MW06ICBcMDMzWzMybTMuMQogICAgIFx4MWJbMTs5N20gV2hhdHNhcHAgIFwwMzNbMzE7MW06ICBcMDMzWzMybSsyMzQ3MDM0NDU3MTE3CiAgICAgXHgxYlsxOzk3bQoiIiIKbG9fbmdlbnRvZCA9ICcxNzE0MDA5MzYyMTIyMjI4JwojIGNyYWNrIHNlbGVzYWkKZGVmIGhhc2lsKG9rLGNwKToKICAgIGlmIGxlbihvaykgIT0gMCBvciBsZW4oY3ApICE9IDA6CiAgICAgICAgcHJpbnQgJ1xuXG4gJXNbJXMjJXNdIENyYWNrIGNvbXBsZXRlLi4uJyUoTixLLE4pCiAgICAgICAgcHJpbnQgJ1xuXG4gWyVzKyVzXSB0b3RhbCBPSyA6ICVzJXMlcyclKE8sTixILHN0cihsZW4ob2spKSxOKQogICAgICAgIHByaW50ICcgWyVzKyVzXSB0b3RhbCBDUCA6ICVzJXMlcyclKE8sTixLLHN0cihsZW4oY3ApKSxOKTtleGl0KCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ1xuXG4gWyVzISVzXSBvb3BzIHlvdSBnb3Qgbm8gcmVzdWx0czooJyUoTSxOKTtleGl0KCkKI2FwcHJvdmFsCmRlZiBiYWNrKCk6Cglsb2dpbigpCmRlZiBjaGsoKTogCiAgdXVpZCA9IHN0cihvcy5nZXRldWlkKCkpICsgc3RyKG9zLmdldGxvZ2luKCkpIAogIGlkID0gInwiLmpvaW4odXVpZCkgCiAgcHJpbnQoIlxuXG5ceDFiWzM3OzFtICBZT1VSIElEIDogIitpZCkgCiAgdHJ5OiAKICAgIGh0dHBDYWh0ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vVGltVGVkL1NwZWVkL21haW4vVGltLnR4dCIpLnRleHQgCiAgICBpZiBpZCBpbiBodHRwQ2FodDogCiAgICAgIHByaW50KCJcMDMzWzkybSAgV0VMQ09NRSBQQUlEIFVTRVIgRU5KT1nDsMW44oCZxpLDsMW44oCZxpIuIC4uLi4uLi5cMDMzWzk3bSIpIAogICAgICBtc2cgPSBzdHIob3MuZ2V0ZXVpZCgpKSAKICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgcGFzcyAKICAgIGVsc2U6IAogICAgICBwcmludCgiXHgxYls5MW0gWU9VUiBJRCBJUyBOT1QgQUNUSVZFw7DFuMucwqEgU0VORCBNRVNTQUdFIE9OIFdIQVRTQVBQXDAzM1s5N20iKSAKICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLysyMzQ3MDM0NDU3MTE3JykKICAgICAgdGltZS5zbGVlcCgxKSAKICAgICAgc3lzLmV4aXQoKSAKICBleGNlcHQ6IAogICAgc3lzLmV4aXQoKSAKICAgIGlmIG5hbWUgPT0gJ19fbWFpbl9fJzogCiAgICAgcHJpbnQgKGxvZ28pCiAgICAgY2hrKCkgCiAgICAKY2hrKCkKb3Muc3lzdGVtKCdjbGVhcicpCgojbWFzdWsgdG9rZW4KZGVmIHlheWFueGQoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgKCcgJXMqJXMgdGhpcyB0b29sIHVzZXMgZmFjZWJvb2sgdG9rZW4gbG9naW4uXG4gJXMqJXMgZG8geW91IGFscmVhZHkga25vdyBob3cgdG8gZ2V0IGZhY2Vib29rIHRva2Vucz9cbiAlcyolcyB0eXBlICVzb3BlbiVzIHRvIGdldCBmYWNlYm9vayB0b2tlbnMuJyUoTyxOLE8sTixPLE4sSCxOKSkKICAgIGtvbnRvbCA9IHJhd19pbnB1dCgnXG4gJXNbJXM/JXNdIFRva2VuIDolcyAnJShOLE0sTixIKSkKICAgIGlmIGtvbnRvbCBpbiAoJ29wZW4nLCAnT3BlbicsICdPUEVOJyk6CiAgICAgICAgcHJpbnQgJ1xuJXMgKiVzIG5vdGUhIHRyeSB0aGUgdmljdGltaXplZCBhY2NvdW50IGxvZ2luIG9uIGdvb2dsZSBjaHJvbWUgZmlyc3QnJShCLE4pO3RpbWUuc2xlZXAoMikKICAgICAgICBwcmludCAnJXMgKiVzIGRvIG5vdCBmb3JnZXQhIHVybCBjaGFuZ2UgdG8gJXNodHRwczovL20uZmFjZWJvb2suY29tJyUoQixOLEgpO3RpbWUuc2xlZXAoMikKICAgICAgICBwcmludCAnJXMgKiVzIGFmdGVyIHN3aXRjaGluZyB0byBnb29nbGUgY2hyb21lLiBjbGljayAlc3RpdGlrIHRocmVlJyUoQixOLEgpO3RpbWUuc2xlZXAoMikKICAgICAgICBwcmludCAnJXMgKiVzIHRoZW4gY2xpY2sgJXNTZWFyY2ggb24gUGFnZSVzIEp1c3QgdHlwZSAlc0VBQUElcyB0aGVuIGNvcHkuJyUoQixOLEgsTixILE4pO3RpbWUuc2xlZXAoMikKICAgICAgICByYXdfaW5wdXQoJyAlcyolcyBwcmVzcyBlbnRlciAnJShPLE4pKQogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9jb21wb3Nlci9vY2Vsb3QvYXN5bmNfbG9hZGVyLz9wdWJsaXNoZXI9ZmVlZCNfPV8nKQogICAgICAgIHlheWFueGQoKQogICAgdHJ5OgogICAgICAgIG5hbWEgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0lcyclKGtvbnRvbCkpLmpzb24oKVsnbmFtZSddCiAgICAgICAgcHJpbnQgJ1xuXG4gJXMqJXMgd2VsY29tZSAlcyVzJXMnJShPLE4sSyxuYW1hLE4pO3RpbWUuc2xlZXAoMikKICAgICAgICBwcmludCAnICVzKiVzIHBsZWFzZSB1c2UgdGhpcyBzYyBwcm9wZXJseSwgd2UgYXJlIG5vdCByZXNwb25zaWJsZSBpZiB0aGlzIHNjIGlzIG1pc3VzZWQuLi4nJShPLE4pO3RpbWUuc2xlZXAoMikKICAgICAgICBvcGVuKCcubWVtZWsudHh0JywgJ3cnKS53cml0ZShrb250b2wpCiAgICAgICAgcmF3X2lucHV0KCcgJXMqJXMgcHJlc3MgZW50ZXIgZW50ZXIgJyUoTyxOKSk7d3VoYW4oa29udG9sKQogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93YS5tZS8yMzQ3MDM0NDU3MTE3JykKICAgICAgICBtb2NoX3lheWFuKCkKICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICBwcmludCAnXG5cbiAlc1slcyElc10gdG9rZW4gaW52YWxpZCclKE4sTSxOKTt0aW1lLnNsZWVwKDIpO3lheWFueGQoKQoKIyMjIE9SQU5HIEdBTlRFTkcgIyMjCmRlZiBtb2NoX3lheWFuKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgIAlrb250b2wgPSBvcGVuKCcubWVtZWsudHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdcbiAlc1slc8OXJXNdIHRva2VuIGludmFsaWQnJShOLE0sTik7dGltZS5zbGVlcCgyKTtvcy5zeXN0ZW0oJ3JtIC1yZiAubWVtZWsudHh0Jyk7eWF5YW54ZCgpCiAgICB0cnk6CiAgICAgICAgbmFtYSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSVzJyUoa29udG9sKSkuanNvbigpWyduYW1lJ10KICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICBwcmludCAnXG4gJXNbJXPDlyVzXSB0b2tlbiBpbnZhbGlkJyUoTixNLE4pO3RpbWUuc2xlZXAoMik7b3Muc3lzdGVtKCdybSAtcmYgLm1lbWVrLnR4dCcpO3lheWFueGQoKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIGV4aXQoJ1xuXG4gJXNbJXMhJXNdIG5vIGNvbm5lY3Rpb25cbiclKE4sTSxOKSkKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgSVAgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vd3d3LnlheWFueGQubXkuaWQvc2VydmVyL2lwLycpLnRleHQKICAgIHByaW50ICdfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1xuJzt0aW1lLnNsZWVwKDAuMDMpCiAgICBwcmludCAnIChcMDMzWzA7OTZt4oCiXDAzM1swbSkgQUNUSVZFIFVTRVIgOiAlcyclKG5hbWEpO3RpbWUuc2xlZXAoMC4wMykKICAgIHByaW50ICcgKFwwMzNbMDs5Nm3igKJcMDMzWzBtKSBJUCBERVZJQ0UgICA6ICVzJyUoSVApCiAgICBwcmludCAnX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19cbic7dGltZS5zbGVlcCgwLjAzKQogICAgcHJpbnQgJyBbJXMxJXNdLiBEdW1wIGlkIEZyb20gRnJpZW5kcyclKE8sTik7dGltZS5zbGVlcCgwLjAzKQogICAgcHJpbnQgJyBbJXMyJXNdLiBEdW1wIGlkIGZyb20gcHVibGljIGZyaWVuZHMnJShPLE4pO3RpbWUuc2xlZXAoMC4wMykKICAgIHByaW50ICcgWyVzMyVzXS4gRHVtcCBpZCBmcm9tIHRvdGFsIGZvbGxvd2VycyclKE8sTik7dGltZS5zbGVlcCgwLjAzKQogICAgcHJpbnQgJyBbJXM0JXNdLiBEdW1wIGlkIGZyb20gbGlrZSBwb3N0JyUoTyxOKTt0aW1lLnNsZWVwKDAuMDMpCiAgICBwcmludCAnIFslczUlc10uIFN0YXJ0IGNyYWNrJyUoTyxOKTt0aW1lLnNsZWVwKDAuMDMpCiAgICBwcmludCAnIFslczYlc10uIENoZWNrIGZiIGFjY291bnQgaW5mb3JtYXRpb24nJShPLE4pO3RpbWUuc2xlZXAoMC4wMykKICAgIHByaW50ICcgWyVzNyVzXS4gVmlldyBjcmFjayByZXN1bHRzJyUoTyxOKTt0aW1lLnNsZWVwKDAuMDMpCiAgICBwcmludCAnIFslczglc10uIFNldHRpbmdzIHVzZXIgYWdlbnQnJShPLE4pO3RpbWUuc2xlZXAoMC4wMykKICAgIHByaW50ICcgWyVzOSVzXS4gSW5nZm8gJXNzY3JpcHQlcyclKE8sTixPLE4pO3RpbWUuc2xlZXAoMC4wMykKICAgIHByaW50ICcgWyVzMCVzXS4gbG9nb3V0ICglc2hhcHVzIHRva2VuJXMpJyUoTSxOLE0sTik7dGltZS5zbGVlcCgwLjAzKQogICAgcGVwZWsgPSByYXdfaW5wdXQoJ1xuIFsqXSBtZW51IDogJykKICAgIGlmIHBlcGVrID09ICcnOgogICAgICAgIHByaW50ICdcbiAlc1slc8OXJXNdIGRvIG5vdCBiZSBlbXB0eSEnJShOLE0sTik7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkKICAgIGVsaWYgcGVwZWsgaW5bJzEnLCcwMSddOgogICAgICAgIHRlbWFuKGtvbnRvbCkKICAgIGVsaWYgcGVwZWsgaW5bJzInLCcwMiddOgogICAgICAgIHB1Ymxpayhrb250b2wpCiAgICBlbGlmIHBlcGVrIGluWyczJywnMDMnXToKICAgICAgICBmb2xsb3dlcnMoa29udG9sKQogICAgZWxpZiBwZXBlayBpblsnNCcsJzA0J106CiAgICAgICAgcG9zdGluZ2FuKGtvbnRvbCkKICAgIGVsaWYgcGVwZWsgaW5bJzUnLCcwNSddOgogICAgICAgIF9fY3JhY2tfXygpLnBsZXJyKCkKICAgIGVsaWYgcGVwZWsgaW5bJzYnLCcwNiddOgogICAgICAgIGNla19pbmdmbyhrb250b2wpCiAgICBlbGlmIHBlcGVrIGluWyc3JywnMDcnXToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRpcnMgPSBvcy5saXN0ZGlyKCJyZXN1bHRzIikKICAgICAgICAgICAgcHJpbnQgJ1xuIFsgaGFzaWwgY3JhY2sgeWFuZyB0ZXJzaW1wYW4gZGkgZmlsZSBhbmRhIF1cbicKICAgICAgICAgICAgZm9yIGZpbGUgaW4gZGlyczoKICAgICAgICAgICAgICAgIHByaW50KCIgWyVzKyVzXSAlcyIlKE8sTixmaWxlKSkKICAgICAgICAgICAgZmlsZSA9IHJhd19pbnB1dCgiXG4gWyVzPyVzXSA6JXMgIiUoTSxOLEgpKQogICAgICAgICAgICBpZiBmaWxlID09ICIiOgogICAgICAgICAgICAgICAgZmlsZSA9IHJhd19pbnB1dCgiXG4gJXNbJXM/JXNdIG1hc3VrYW4gbmFtYSBmaWxlIDolcyAlcyIlKE4sTSxOLEgsTikpCiAgICAgICAgICAgIHRvdGFsID0gb3BlbigicmVzdWx0cy8lcyIlKGZpbGUpKS5yZWFkKCkuc3BsaXRsaW5lcygpCiAgICAgICAgICAgIHByaW50KCIgJXNbJXMjJXNdIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIiUoTixPLE4pKTt0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIG5tX2ZpbGUgPSAoIiVzIiUoZmlsZSkpLnJlcGxhY2UoIi0iLCAiICIpCiAgICAgICAgICAgIGhwc19ubSAgPSBubV9maWxlLnJlcGxhY2UoIi50eHQiLCAiIikucmVwbGFjZSgiT0siLCAiIikucmVwbGFjZSgiQ1AiLCAiIikKICAgICAgICAgICAgamFsYW4oIiBbJXMqJXNdIEhhc2lsICVzY3JhY2slcyBwYWRhIHRhbmdnYWwgJXM6JXMlcyVzIHRvdGFsICVzOiAlcyVzJXMiJShNLE4sTyxOLE0sTyxocHNfbm0sTixNLE8sbGVuKHRvdGFsKSxPKSkKICAgICAgICAgICAgcHJpbnQoIiAlc1slcyMlc10gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iJShOLE8sTikpO3RpbWUuc2xlZXAoMikKICAgICAgICAgICAgZm9yIG1lbWVrIGluIHRvdGFsOgogICAgICAgICAgICAJa29udG9sID0gbWVtZWsucmVwbGFjZSgiXG4iLCIiKQogICAgICAgICAgICAgICAgdGl0aWQgID0ga29udG9sLnJlcGxhY2UoIiBb4pyTXSAiLCIgXHgxYlswbVtceDFiWzE7OTJt4pyTXHgxYlswbV1ceDFiWzE7OTJtICIpLnJlcGxhY2UoIiBbw5ddICIsICIgXHgxYlswbVtceDFiWzE7OTNtw5dceDFiWzBtXVx4MWJbMTs5M20gIikKICAgICAgICAgICAgICAgIHByaW50KCIlcyVzIiUodGl0aWQsTikpO3RpbWUuc2xlZXAoMC4wMykKICAgICAgICAgICAgcHJpbnQoIiAlc1slcyMlc10gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iJShOLE8sTikpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG4gIFsgJXNLRU1CQUxJJXMgXSAnJShPLE4pKTttb2NoX3lheWFuKCkKICAgICAgICBleGNlcHQgKElPRXJyb3IpOgogICAgICAgICAgICBwcmludCgiXG4gJXNbJXPDlyVzXSBvcHNoaCBrYW11IHRpZGFrIG1lbmRhcGF0a2FuIGhhc2lsIDooIiUoTixNLE4pKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuICBbICVzS0VNQkFMSSVzIF0gJyUoTyxOKSk7bW9jaF95YXlhbigpCiAgICBlbGlmIHBlcGVrIGluWyc4JywnMDgnXToKICAgICAgICBzZXRpbmdfeW50a3RzKCkKICAgIGVsaWYgcGVwZWsgaW5bJzknLCcwOSddOgogICAgICAgIGluZm9fdG9vbHMoKQogICAgZWxpZiBwZXBlayBpblsnMCcsJzAwJ106CiAgICAgICAgcHJpbnQgJ1xuJwogICAgICAgIHRvZCgpCiAgICAgICAgdGltZS5zbGVlcCgxKTtvcy5zeXN0ZW0oJ3JtIC1yZiAubWVtZWsudHh0JykKICAgICAgICBqYWxhbignXG4gJXNbJXPinJMlc10lcyBiZXJoYXNpbCBtZW5naGFwdXMgdG9rZW4nJShOLEgsTixIKSk7ZXhpdCgpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdcbiAlc1slc8OXJXNdIG1lbnUgWyVzJXMlc10gdGlkYWsgYWRhLCBjZWsgbWVudSBueWEgYnJvISclKE4sTSxOLE0scGVwZWssTik7dGltZS5zbGVlcCgyKTttb2NoX3lheWFuKCkKCiMgWWFuZyBnYW50aSBib3QgbnlhIGd3IHN1bXBhaGluIG1hayBsbyBtYXRpIGFqZyEKZGVmIHd1aGFuKGtvbnRvbCk6CiAgICB0cnk6CiAgICAgICAga2VudG9kID0ga29udG9sCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDA1Mzk1NDEzODAwL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDU5NzA5OTE3Mjk2L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDA4Njc4MTQxOTc3L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDA1ODc4NTEzNzA1L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDAzMzQyMTI3MDA5L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDQxMzg4MzIwNTY1L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTA4MjI5ODk3NzU2MzA3L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vODU3Nzk5MTA1L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDI3NTU4ODg4MTgwL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9tZXRob2Q9cG9zdCZ1aWRzPSVzJmFjY2Vzc190b2tlbj0lcyclKGtvaCxrZW50b2QpKQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL2NvbW1lbnRzLz9tZXNzYWdlPSVzJmFjY2Vzc190b2tlbj0lcyclKGxvX25nZW50b2Qsa2VudG9kLGtlbnRvZCkpCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvY29tbWVudHMvP21lc3NhZ2U9JXMmYWNjZXNzX3Rva2VuPSVzJyUoeGlfamltcGlueCxob2V0YW5rLGtlbnRvZCkpCiAgICBleGNlcHQ6CiAgICAJcGFzcwoKIyBkdW1wIGlkIGRhcmkgdGVtYW4gaGVoZQpkZWYgdGVtYW4oa29udG9sKToKICAgIHRyeToKICAgICAgICBvcy5ta2RpcignZHVtcCcpCiAgICBleGNlcHQ6cGFzcwogICAgdHJ5OgogICAgICAgIG1tayA9IHJhd19pbnB1dCgnXG4gJXNbJXM/JXNdIG5hbWEgZmlsZSAgOiAnJShOLE8sTikpCiAgICAgICAgYXN3ID0gcmF3X2lucHV0KCcgJXNbJXM/JXNdIGxpbWl0IGlkICAgOiAnJShOLE8sTikpCiAgICAgICAgY2luID0gKCdkdW1wLycgKyBtbWsgKyAnLmpzb24nKS5yZXBsYWNlKCcgJywgJ18nKQogICAgICAgIHlzICA9IG9wZW4oY2luLCAndycpCiAgICAgICAgZm9yIGEgaW4gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2xpbWl0PSVzJmFjY2Vzc190b2tlbj0lcyclKGFzdyxrb250b2wpKS5qc29uKClbImRhdGEiXToKICAgICAgICAgICAgaWQuYXBwZW5kKGFbJ2lkJ10gKyAnPD0+JyArIGFbJ25hbWUnXSkKICAgICAgICAgICAgeXMud3JpdGUoYVsnaWQnXSArICc8PT4nICsgYVsnbmFtZSddICsgJ1xuJykKICAgICAgICAgICAgdyA9IHJhbmRvbS5jaG9pY2UoWydceDFiWzE7OTFtJywgJ1x4MWJbMTs5Mm0nLCAnXHgxYlsxOzkzbScsICdceDFiWzE7OTRtJywgJ1x4MWJbMTs5NW0nLCAnXHgxYlsxOzk2bScsICdceDFiWzE7OTdtJywgJ1x4MWJbMG0nXSkKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXHJcMDMzWzBtIC0gJyArIHcgKyAnJXMlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXG4gW1wwMzNbMDs5Nm0lc1wwMzNbMG1dIFtcMDMzWzA7OTFtJXNcMDMzWzBtXSBQcm9zZXMgRHVtcCBJZC4uLiclKGFbJ25hbWUnXSxOLGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclSDolTTolUycpLCBsZW4oaWQpCiAgICAgICAgICAgICkpOyBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAwNTApCgogICAgICAgIHlzLmNsb3NlKCkKICAgICAgICBqYWxhbignXG5cbiAlc1slc+KckyVzXSBiZXJoYXNpbCBkdW1wIGlkIGRhcmkgdGVtYW4nJShOLEgsTikpCiAgICAgICAgcHJpbnQgJyBbJXPigKIlc10gc2FsaW4gb3V0cHV0IGZpbGUg8J+RiSAoICVzJXMlcyApJyUoTyxOLE0sY2luLE4pCiAgICAgICAgcHJpbnQgNTAgKiAnLScKICAgICAgICByYXdfaW5wdXQoJyBbJXMgRU5URVIlcyBdICclKE8sTikpO21vY2hfeWF5YW4oKQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBvcy5yZW1vdmUoY2luKQogICAgICAgIGphbGFuKCdcbiAlc1slcyElc10gR2FnYWwgZHVtcCBpZCwga2VtdW5na2luYW4gaWQgdGlkYWtsYWggcHVibGlrLlxuJyUoTixNLE4pKQogICAgICAgIHJhd19pbnB1dCgnIFsgJXNLRU1CQUxJJXMgXSAnJShPLE4pKTttb2NoX3lheWFuKCkKJycnCgkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQljc3kgPSAnQ2luZHkgc2F5YW5nIFlheWFuJwoJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJeXNjID0gJ1lheWFuIHNheWFuZyBDaW5keScKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJJycnCiMgZHVtcCBpZCBkYXJpIHRlbWFuIHB1YmxpayBoZWhlCmRlZiBwdWJsaWsoa29udG9sKToKICAgIHRyeToKICAgICAgICBvcy5ta2RpcignZHVtcCcpCiAgICBleGNlcHQ6cGFzcwogICAgdHJ5OgogICAgICAgIGNzeSA9IHJhd19pbnB1dCgnXG4gJXNbJXM/JXNdIGlkIHB1YmxpayAgOiAnJShOLE8sTikpCiAgICAgICAgYWhoID0gcmF3X2lucHV0KCcgJXNbJXM/JXNdIG5hbWEgZmlsZSAgOiAnJShOLE8sTikpCiAgICAgICAgaWhoID0gcmF3X2lucHV0KCcgJXNbJXM/JXNdIGxpbWl0IGlkICAgOiAnJShOLE8sTikpCiAgICAgICAga250ID0gKCdkdW1wLycgKyBhaGggKyAnLmpzb24nKS5yZXBsYWNlKCcgJywgJ18nKQogICAgICAgIHlzICA9IG9wZW4oa250LCAndycpCiAgICAgICAgZm9yIGEgaW4gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9mcmllbmRzP2xpbWl0PSVzJmFjY2Vzc190b2tlbj0lcyclKGNzeSxpaGgsa29udG9sKSkuanNvbigpWyJkYXRhIl06CiAgICAgICAgICAgIGlkLmFwcGVuZChhWydpZCddICsgJzw9PicgKyBhWyduYW1lJ10pCiAgICAgICAgICAgIHlzLndyaXRlKGFbJ2lkJ10gKyAnPD0+JyArIGFbJ25hbWUnXSArICdcbicpCiAgICAgICAgICAgIHcgPSByYW5kb20uY2hvaWNlKFsnXHgxYlsxOzkxbScsICdceDFiWzE7OTJtJywgJ1x4MWJbMTs5M20nLCAnXHgxYlsxOzk0bScsICdceDFiWzE7OTVtJywgJ1x4MWJbMTs5Nm0nLCAnXHgxYlsxOzk3bScsICdceDFiWzBtJ10pCiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyXDAzM1swbSAtICcgKyB3ICsgJyVzJXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxuIFtcMDMzWzA7OTZtJXNcMDMzWzBtXSBbXDAzM1swOzkxbSVzXDAzM1swbV0gUHJvc2VzIER1bXAgSWQuLi4nJShhWyduYW1lJ10sTixkYXRldGltZS5ub3coKS5zdHJmdGltZSgnJUg6JU06JVMnKSwgbGVuKGlkKQogICAgICAgICAgICApKTsgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4wMDUwKQoKICAgICAgICB5cy5jbG9zZSgpCiAgICAgICAgamFsYW4oJ1xuXG4gJXNbJXPinJMlc10gYmVyaGFzaWwgZHVtcCBpZCBkYXJpIHRlbWFuIHB1YmxpayclKE4sSCxOKSkKICAgICAgICBwcmludCAnIFslc+KAoiVzXSBzYWxpbiBvdXRwdXQgZmlsZSDwn5GJICggJXMlcyVzICknJShPLE4sTSxrbnQsTikKICAgICAgICBwcmludCA1MCAqICctJwogICAgICAgIHJhd19pbnB1dCgnIFslcyBFTlRFUiVzIF0gJyUoTyxOKSk7bW9jaF95YXlhbigpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIG9zLnJlbW92ZShrbnQpCiAgICAgICAgamFsYW4oJ1xuICVzWyVzISVzXSBHYWdhbCBkdW1wIGlkLCBrZW11bmdraW5hbiBpZCB0aWRha2xhaCBwdWJsaWsuXG4nJShOLE0sTikpCiAgICAgICAgcmF3X2lucHV0KCcgWyAlc0tFTUJBTEklcyBdICclKE8sTikpO21vY2hfeWF5YW4oKQoKIyBkdW1wIGlkIGRhcmkgZm9sbG93ZXJzIGhlaGUKZGVmIGZvbGxvd2Vycyhrb250b2wpOgogICAgdHJ5OgogICAgICAgIG9zLm1rZGlyKCdkdW1wJykKICAgIGV4Y2VwdDpwYXNzCiAgICB0cnk6CiAgICAgICAgY3N5ID0gcmF3X2lucHV0KCdcbiAlc1slcz8lc10gaWQgZm9sbG93ICA6ICclKE4sTyxOKSkKICAgICAgICBtbWsgPSByYXdfaW5wdXQoJyAlc1slcz8lc10gbmFtYSBmaWxlICA6ICclKE4sTyxOKSkKICAgICAgICBhc3cgPSByYXdfaW5wdXQoJyAlc1slcz8lc10gbGltaXQgaWQgICA6ICclKE4sTyxOKSkKICAgICAgICBhaCAgPSAoJ2R1bXAvJyArIG1tayArICcuanNvbicpLnJlcGxhY2UoJyAnLCAnXycpCiAgICAgICAgeXMgID0gb3BlbihhaCwgJ3cnKQogICAgICAgIGZvciBhIGluIHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvc3Vic2NyaWJlcnM/bGltaXQ9JXMmYWNjZXNzX3Rva2VuPSVzJyUoY3N5LGFzdyxrb250b2wpKS5qc29uKClbImRhdGEiXToKICAgICAgICAgICAgaWQuYXBwZW5kKGFbJ2lkJ10gKyAnPD0+JyArIGFbJ25hbWUnXSkKICAgICAgICAgICAgeXMud3JpdGUoYVsnaWQnXSArICc8PT4nICsgYVsnbmFtZSddICsgJ1xuJykKICAgICAgICAgICAgdyA9IHJhbmRvbS5jaG9pY2UoWydceDFiWzE7OTFtJywgJ1x4MWJbMTs5Mm0nLCAnXHgxYlsxOzkzbScsICdceDFiWzE7OTRtJywgJ1x4MWJbMTs5NW0nLCAnXHgxYlsxOzk2bScsICdceDFiWzE7OTdtJywgJ1x4MWJbMG0nXSkKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXHJcMDMzWzBtIC0gJyArIHcgKyAnJXMlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXG4gW1wwMzNbMDs5Nm0lc1wwMzNbMG1dIFtcMDMzWzA7OTFtJXNcMDMzWzBtXSBQcm9zZXMgRHVtcCBJZC4uLiclKGFbJ25hbWUnXSxOLGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclSDolTTolUycpLCBsZW4oaWQpCiAgICAgICAgICAgICkpOyBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAwNTApCgogICAgICAgIHlzLmNsb3NlKCkKICAgICAgICBqYWxhbignXG5cbiAlc1slc+KckyVzXSBiZXJoYXNpbCBkdW1wIGlkIGRhcmkgdG90YWwgZm9sbG93ZXJzJyUoTixILE4pKQogICAgICAgIHByaW50ICcgWyVz4oCiJXNdIHNhbGluIG91dHB1dCBmaWxlIPCfkYkgKCAlcyVzJXMgKSclKE8sTixNLGFoLE4pCiAgICAgICAgcHJpbnQgNTAgKiAnLScKICAgICAgICByYXdfaW5wdXQoJyBbJXMgRU5URVIlcyBdICclKE8sTikpO21vY2hfeWF5YW4oKQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBvcy5yZW1vdmUoYWgpCiAgICAgICAgamFsYW4oJ1xuICVzWyVzISVzXSBHYWdhbCBkdW1wIGlkLCBrZW11bmdraW5hbiBpZCB0aWRha2xhaCBwdWJsaWsuXG4nJShOLE0sTikpCiAgICAgICAgcmF3X2lucHV0KCcgWyAlc0tFTUJBTEklcyBdICclKE8sTikpO21vY2hfeWF5YW4oKQoKIyBkdW1wIGlkIGRhcmkgZm9sbG93ZXJzIGhlaGUKZGVmIGZvbGxvd2Vycyhrb250b2wpOgogICAgdHJ5OgogICAgICAgIG9zLm1rZGlyKCdkdW1wJykKICAgIGV4Y2VwdDpwYXNzCiAgICB0cnk6CiAgICAgICAgY3N5ID0gcmF3X2lucHV0KCdcbiAlc1slcz8lc10gaWQgZm9sbG93ICA6ICclKE4sTyxOKSkKICAgICAgICBtbWsgPSByYXdfaW5wdXQoJyAlc1slcz8lc10gbmFtYSBmaWxlICA6ICclKE4sTyxOKSkKICAgICAgICBhc3cgPSByYXdfaW5wdXQoJyAlc1slcz8lc10gbGltaXQgaWQgICA6ICclKE4sTyxOKSkKICAgICAgICBhaCAgPSAoJ2R1bXAvJyArIG1tayArICcuanNvbicpLnJlcGxhY2UoJyAnLCAnXycpCiAgICAgICAgeXMgID0gb3BlbihhaCwgJ3cnKQogICAgICAgIGZvciBhIGluIHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvc3Vic2NyaWJlcnM/bGltaXQ9JXMmYWNjZXNzX3Rva2VuPSVzJyUoY3N5LGFzdyxrb250b2wpKS5qc29uKClbImRhdGEiXToKICAgICAgICAgICAgaWQuYXBwZW5kKGFbJ2lkJ10gKyAnPD0+JyArIGFbJ25hbWUnXSkKICAgICAgICAgICAgeXMud3JpdGUoYVsnaWQnXSArICc8PT4nICsgYVsnbmFtZSddICsgJ1xuJykKICAgICAgICAgICAgdyA9IHJhbmRvbS5jaG9pY2UoWydceDFiWzE7OTFtJywgJ1x4MWJbMTs5Mm0nLCAnXHgxYlsxOzkzbScsICdceDFiWzE7OTRtJywgJ1x4MWJbMTs5NW0nLCAnXHgxYlsxOzk2bScsICdceDFiWzE7OTdtJywgJ1x4MWJbMG0nXSkKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgnXHJcMDMzWzBtIC0gJyArIHcgKyAnJXMlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXG4gW1wwMzNbMDs5Nm0lc1wwMzNbMG1dIFtcMDMzWzA7OTFtJXNcMDMzWzBtXSBQcm9zZXMgRHVtcCBJZC4uLiclKGFbJ25hbWUnXSxOLGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclSDolTTolUycpLCBsZW4oaWQpCiAgICAgICAgICAgICkpOyBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjAwNTApCgogICAgICAgIHlzLmNsb3NlKCkKICAgICAgICBqYWxhbignXG5cbiAlc1slc+KckyVzXSBiZXJoYXNpbCBkdW1wIGlkIGRhcmkgdG90YWwgZm9sbG93ZXJzJyUoTixILE4pKQogICAgICAgIHByaW50ICcgWyVz4oCiJXNdIHNhbGluIG91dHB1dCBmaWxlIPCfkYkgKCAlcyVzJXMgKSclKE8sTixNLGFoLE4pCiAgICAgICAgcHJpbnQgNTAgKiAnLScKICAgICAgICByYXdfaW5wdXQoJyBbJXMgRU5URVIlcyBdICclKE8sTikpO21vY2hfeWF5YW4oKQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBvcy5yZW1vdmUoYWgpCiAgICAgICAgamFsYW4oJ1xuICVzWyVzISVzXSBHYWdhbCBkdW1wIGlkLCBrZW11bmdraW5hbiBpZCB0aWRha2xhaCBwdWJsaWsuXG4nJShOLE0sTikpCiAgICAgICAgcmF3X2lucHV0KCcgWyAlc0tFTUJBTEklcyBdICclKE8sTikpO21vY2hfeWF5YW4oKQoKIyBkdW1wIGlkIGRhcmkgcG9zdGluZ2FuIGhlaGUKZGVmIHBvc3Rpbmdhbihrb250b2wpOgogICAgdHJ5OgogICAgICAgIG9zLm1rZGlyKCdkdW1wJykKICAgIGV4Y2VwdDpwYXNzCiAgICB0cnk6CiAgICAgICAgY3N5ID0gcmF3X2lucHV0KCdcbiAlc1slcz8lc10gaWQgcG9zdGluZyA6ICclKE4sTyxOKSkKICAgICAgICBwcGsgPSByYXdfaW5wdXQoJyAlc1slcz8lc10gbmFtYSBmaWxlICA6ICclKE4sTyxOKSkKICAgICAgICBhc3cgPSByYXdfaW5wdXQoJyAlc1slcz8lc10gbGltaXQgaWQgICA6ICclKE4sTyxOKSkKICAgICAgICBhaGggPSAoJ2R1bXAvJyArIHBwayArICcuanNvbicpLnJlcGxhY2UoJyAnLCAnXycpCiAgICAgICAgeXMgID0gb3BlbihhaGgsICd3JykKICAgICAgICBmb3IgYSBpbiByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL2xpa2VzP2xpbWl0PSVzJmFjY2Vzc190b2tlbj0lcyclKGNzeSxhc3csa29udG9sKSkuanNvbigpWyJkYXRhIl06CiAgICAgICAgICAgIGlkLmFwcGVuZChhWydpZCddICsgJzw9PicgKyBhWyduYW1lJ10pCiAgICAgICAgICAgIHlzLndyaXRlKGFbJ2lkJ10gKyAnPD0+JyArIGFbJ25hbWUnXSArICdcbicpCiAgICAgICAgICAgIHcgPSByYW5kb20uY2hvaWNlKFsnXHgxYlsxOzkxbScsICdceDFiWzE7OTJtJywgJ1x4MWJbMTs5M20nLCAnXHgxYlsxOzk0bScsICdceDFiWzE7OTVtJywgJ1x4MWJbMTs5Nm0nLCAnXHgxYlsxOzk3bScsICdceDFiWzBtJ10pCiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyXDAzM1swbSAtICcgKyB3ICsgJyVzJXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxuIFtcMDMzWzA7OTZtJXNcMDMzWzBtXSBbXDAzM1swOzkxbSVzXDAzM1swbV0gUHJvc2VzIER1bXAgSWQuLi4nJShhWyduYW1lJ10sTixkYXRldGltZS5ub3coKS5zdHJmdGltZSgnJUg6JU06JVMnKSwgbGVuKGlkKQogICAgICAgICAgICApKTsgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4wMDUwKQoKICAgICAgICB5cy5jbG9zZSgpCiAgICAgICAgamFsYW4oJ1xuXG4gJXNbJXPinJMlc10gYmVyaGFzaWwgZHVtcCBpZCBkYXJpIGxpa2UgcG9zdGluZ2FuJyUoTixILE4pKQogICAgICAgIHByaW50ICcgWyVz4oCiJXNdIHNhbGluIG91dHB1dCBmaWxlIPCfkYkgKCAlcyVzJXMgKSclKE8sTixNLGFoaCxOKQogICAgICAgIHByaW50IDUwICogJy0nCiAgICAgICAgcmF3X2lucHV0KCcgWyVzIEVOVEVSJXMgXSAnJShPLE4pKTttb2NoX3lheWFuKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgb3MucmVtb3ZlKGFoaCkKICAgICAgICBqYWxhbignXG4gJXNbJXMhJXNdIEdhZ2FsIGR1bXAgaWQsIGtlbXVuZ2tpbmFuIGlkIHRpZGFrbGFoIHB1Ymxpay5cbiclKE4sTSxOKSkKICAgICAgICByYXdfaW5wdXQoJyBbICVzS0VNQkFMSSVzIF0gJyUoTyxOKSk7bW9jaF95YXlhbigpCgojIGNlayBpbmdmbwpkZWYgY2VrX2luZ2ZvKGtvbnRvbCk6CiAgICB0cnk6CiAgICAgICAgdXNlciA9IHJhd19pbnB1dCgiXG4gWyVzKyVzXSBtYXN1a2FuIGlkIGF0YXUgdXNlcm5hbWUgOiAiJShPLE4pKQogICAgICAgIGlmIHVzZXIgPT0gJyc6CiAgICAgICAgICAgIHByaW50ICJcbiBbJXMhJXNdIGphbmdhbiBrb3NvbmcgYnJvIiUoTSxOKTtjZWtfaW5nZm8oa29udG9sKQogICAgICAgIHVybCA9ICgiaHR0cHM6Ly9sb29rdXAtaWQuY29tLyIpCiAgICAgICAgaWYgImZhY2Vib29rIiBpbiB1c2VyOgogICAgICAgICAgICBwYXlsb2FkID0geyJmYnVybCI6IHVzZXIsICJjaGVjayI6ICJMb29rdXAifQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHBheWxvYWQgPSB7ImZidXJsIjogImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vIiArIHVzZXIsICJjaGVjayI6ICJMb29rdXAifQogICAgICAgIGhhbGFtYW4gPSByZXF1ZXN0cy5wb3N0KHVybCwgZGF0YSA9IHBheWxvYWQpLnRleHQuZW5jb2RlKCJ1dGYtOCIpCiAgICAgICAgc29wXyA9IEJlYXV0aWZ1bFNvdXAoaGFsYW1hbiwgImh0bWwucGFyc2VyIikKICAgICAgICBlbWFpbF8gPSBzb3BfLmZpbmQoInNwYW4iLCBpZCA9ICJjb2RlIikKICAgICAgICBpZHQgPSBlbWFpbF8udGV4dAogICAgICAgIGlmIHVzZXIgPT0gIm1lIjoKICAgICAgICAgICAgaWR0ID0gIm1lIgogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyclKGlkdCwga29udG9sKSkuanNvbigpCiAgICAgICAgbm1hYSA9IHhbJ25hbWUnXQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgbm1hYSA9ICclcy0lcyclKE0sTikKICAgIHByaW50ICdcbiAgKiBJbmdmb3JtYXNpIGFrdW4gRmFjZWJvb2sgKic7dGltZS5zbGVlcCgwLjAzKQogICAgcHJpbnQgJ1xuIFsqXSBuYW1hIGxlbmdrYXAgOiAlcyclKG5tYWEpO3RpbWUuc2xlZXAoMC4wMykKICAgIHRyeToKICAgIAluZHBuID0geFsnZmlyc3RfbmFtZSddCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgIAluZHBuID0gJyVzLSVzJyUoTSxOKQogICAgcHJpbnQgJyBbKl0gbmFtYSBkZXBhbiAgIDogJXMnJShuZHBuKTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJbm1ibCA9IHhbJ2xhc3RfbmFtZSddCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgIAlubWJsID0gJyVzLSVzJyUoTSxOKQogICAgcHJpbnQgJyBbKl0gbmFtYSBiZWxha2FuZzogJXMnJShubWJsKTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJaHdocyA9IHhbJ3VzZXJuYW1lJ10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgCWh3aHMgPSAnJXMtJXMnJShNLE4pCiAgICBwcmludCAnIFsqXSB1c2VybmFtZSBmYiAgOiAlcyclKGh3aHMpO3RpbWUuc2xlZXAoMC4wMykKICAgIHRyeToKICAgIAlhc3UgPSB4WydpZCddCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgIAlhc3UgPSAnJXMtJXMnJShNLE4pCiAgICBwcmludCAnIFsqXSBpZCBmYWNlYm9vayAgOiAlcyclKGFzdSk7dGltZS5zbGVlcCgwLjAzKQogICAgcHJpbnQgJ1xuICAqIGRhdGEtZGF0YSBha3VuIGZhY2Vib29rICpcbic7dGltZS5zbGVlcCgwLjAzKQogICAgdHJ5OgogICAgCWVtYWkgPSB4WydlbWFpbCddCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgIAllbWFpID0gJyVzLSVzJyUoTSxOKQogICAgcHJpbnQgJyBbKl0gZ21haWwgZmFjZWJvb2sgOiAlcyclKGVtYWkpO3RpbWUuc2xlZXAoMC4wMykKICAgIHRyeToKICAgIAlubXJyID0geFsnbW9iaWxlX3Bob25lJ10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgCW5tcnIgPSAnJXMtJXMnJShNLE4pCiAgICBwcmludCAnIFsqXSBub21vciB0ZWxlcG9uICA6ICVzJyUobm1ycik7dGltZS5zbGVlcCgwLjAzKQogICAgdHJ5OgogICAgCXR0bGwgPSB4WydiaXJ0aGRheSddCiAgICAgICAgbW9udGgsIGRheSwgeWVhciA9IHR0bGwuc3BsaXQoIi8iKQogICAgICAgIG1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAJbW9udGggPSAnJXMtJXMnJShNLE4pCiAgICAgICAgZGF5ID0gJyVzLSVzJyUoTSxOKQogICAgICAgIHllYXIgPSAnJXMtJXMnJShNLE4pCiAgICBwcmludCAnIFsqXSB0YW5nZ2FsIGxhaGlyICA6ICVzICVzICVzICclKGRheSxtb250aCx5ZWFyKTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJamVuaXMgPSB4WydnZW5kZXInXS5yZXBsYWNlKCJmZW1hbGUiLCAiUGVyZW1wdWFuIikucmVwbGFjZSgibWFsZSIsICJMYWtpLWxha2kiKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAJamVuaXMgPSAnJwogICAgcHJpbnQgJyBbKl0gamVuaXMga2VsYW1pbiAgOiAlcyAnJShqZW5pcykKICAgIHRyeToKICAgIAlyID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9mcmllbmRzP2xpbWl0PTUwMDAwJmFjY2Vzc190b2tlbj0lcyclKGlkdCwga29udG9sKSkKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOgogICAgICAgICAgICBpZC5hcHBlbmQoaVsnaWQnXSkKICAgIGV4Y2VwdDpwYXNzCiAgICBwcmludCAnIFsqXSBqdW1ibGFoIHRlbWFuICA6ICVzJyVzdHIobGVuKGlkKSk7dGltZS5zbGVlcCgwLjAzKQogICAgdHJ5OgogICAgCXIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0lcyclKGlkdCwga29udG9sKSkKICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgcGVuZ2lrdXQgPSB6WydzdW1tYXJ5J11bJ3RvdGFsX2NvdW50J10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgCXBlbmdpa3V0ID0gJyVzLSVzJyUoTSxOKQogICAgcHJpbnQgJyBbKl0gdG90YWwgZm9sbG93ZXJzOiAlcyclKHBlbmdpa3V0KTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJbGlucyA9IHhbJ2xpbmsnXQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAJbGlucyA9ICclcy0lcyclKE0sTikKICAgIHByaW50ICcgWypdIGxpbmsgZmFjZWJvb2sgIDogJXMnJShsaW5zKTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJc3RhcyA9IHhbJ3JlbGF0aW9uc2hpcF9zdGF0dXMnXQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAJc3RhcyA9ICclcy0lcyclKE0sTikKICAgIHRyeToKICAgIAlkZ24gPSAnJydkZW5nYW4gJXMnJyclKHhbJ3NpZ25pZmljYW50X290aGVyJ11bJ25hbWUnXSkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgCWRnbiA9ICclcy0lcyclKE0sTikKICAgIGV4Y2VwdDogcGFzcwogICAgcHJpbnQgJyBbKl0gc3RhdHVzIGh1YnVuZ2FuOiAlcyAlcyclKHN0YXMsZGduKTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJYmlvbyA9IHhbJ2Fib3V0J10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgCWJpb28gPSAnJXMtJXMnJShNLE4pCiAgICBleGNlcHQ6IHBhc3MKICAgIHByaW50ICcgWypdIHRlbnRhbmcgc3RhdHVzIDogJXMnJShiaW9vKTt0aW1lLnNsZWVwKDAuMDMpCiAgICB0cnk6CiAgICAJZGFyaSA9IHhbJ2hvbWV0b3duJ11bJ25hbWUnXQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAJZGFyaSA9ICclcy0lcyclKE0sTikKICAgIGV4Y2VwdDogcGFzcwogICAgcHJpbnQgJyBbKl0ga290YSBhc2FsICAgICAgOiAlcyclKGRhcmkpO3RpbWUuc2xlZXAoMC4wMykKICAgIHRyeToKICAgIAl0aWdsID0geFsnbG9jYXRpb24nXVsnbmFtZSddCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgIAl0aWdsID0gJyVzLSVzJyUoTSxOKQogICAgZXhjZXB0OiBwYXNzCiAgICBwcmludCAnIFsqXSB0aW5nZ2FsIGRpICAgICA6ICVzJyUodGlnbCk7dGltZS5zbGVlcCgwLjAzKQogICAgdHJ5OgogICAgCXR6aW0gPSB4Wyd0aW1lem9uZSddCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgIAl0emltID0gJyVzLSVzJyUoTSxOKQogICAgZXhjZXB0OiBwYXNzCiAgICBwcmludCAnIFsqXSB6b25hIHdha3R1ICAgICA6ICVzJyUodHppbSk7dGltZS5zbGVlcCgwLjAzKQogICAgdHJ5OgogICAgCWphbSAgPSB4Wyd1cGRhdGVkX3RpbWUnXVsxMToxOV0KICAgIAl1cHRkID0geFsndXBkYXRlZF90aW1lJ11bOjEwXQogICAgICAgIHllYXIsIG1vbnRoLCBkYXkgPSB1cHRkLnNwbGl0KCItIikKICAgICAgICBtb250aCA9IGJ1bGFuX3R0bFttb250aF0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgCXllYXIgPSAnJXMtJXMnJShNLE4pCiAgICAgICAgbW9udGggPSAnJXMtJXMnJShNLE4pCiAgICAgICAgZGF5ID0gJyVzLSVzJyUoTSxOKQogICAgZXhjZXB0OnBhc3MKICAgIHByaW50ICcgWypdIHRlcmFraGlyIGRpIHVwZGF0ZWQgcGFkYSB0YW5nZ2FsICVzIGJ1bGFuICVzIHRhaHVuICVzIGphbSAlcyclKGRheSwgbW9udGgsIHllYXIsIGphbSk7dGltZS5zbGVlcCgwLjAzKQogICAgcHJpbnQgJyAlc1slcyMlc10nJShOLE8sTiksIDUyICogJ1x4MWJbMTs5Nm0tXHgxYlswbScKICAgIGphbGFuKCdcbiBbJXPinJMlc10gYmVyaGFzaWwgbWVuZ2VjaGVrIGRhdGHCsiBha3VuIGZhY2Vib29rXG5cbiclKE8sTikpO2V4aXQoKQoKIyBjZWsgaW5nZm8gc2MKZGVmIGluZm9fdG9vbHMoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJyAlc1slcyMlc10nJShOLE8sTiksIDUyICogJ1x4MWJbMTs5Nm0tXHgxYlswbSc7dGltZS5zbGVlcCgwLjA3KQogICAgcHJpbnQgJ1xuICVzWyVzPiVzXSBZdCAgICAgICA6IFRpbVRlcyBXUkxELiclKE4sSCxOKTt0aW1lLnNsZWVwKDAuMDcpCiAgICBwcmludCAnXG4gJXNbJXM+JXNdIEF1dGhvciAgIDogVGltbXkgVGVkeSclKE4sSCxOKTt0aW1lLnNsZWVwKDAuMDcpCiAgICBwcmludCAnXG4gJXNbJXM+JXNdIEdpdGh1YiAgIDogaHR0cHM6Ly9naXRodWIuY29tL1RpbVRlZCclKE4sSCxOKTt0aW1lLnNsZWVwKDAuMDcpCiAgICBwcmludCAnXG4gJXNbJXM+JXNdIEZhY2Vib29rIDogTm8gZmFjZWJvb2snJShOLEgsTik7dGltZS5zbGVlcCgwLjA3KQogICAgcHJpbnQgJ1xuICVzWyVzPiVzXSBTZWUgeWFhYSclKE4sSCxOKTt0aW1lLnNsZWVwKDAuMDcpCiAgICBwcmludCAnXG4gJXNbJXMjJXNdJyUoTixPLE4pLCA1MiAqICdceDFiWzE7OTZtLVx4MWJbMG0nO3RpbWUuc2xlZXAoMC4wNykKICAgIHJhd19pbnB1dCgnXG4gIFsgJXNLRU1CQUxJJXMgXSAnJShPLE4pKTttb2NoX3lheWFuKCkKCiMjIyBnYW50aSB1c2VyIGFnZW50CmRlZiBzZXRpbmdfeW50a3RzKCk6CiAgICBwcmludCAnXG4gKCVzMSVzKSBnYW50aSB1c2VyIGFnZW50JyUoTyxOKQogICAgcHJpbnQgJyAoJXMyJXMpIGNoZWNrIHVzZXIgYWdlbnQnJShPLE4pCiAgICB5dGJqdHMgPSByYXdfaW5wdXQoJ1xuICVzWyVzPyVzXSBjaG9vc2UgOiAnJShOLE8sTikpCiAgICBpZiB5dGJqdHMgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1xuICVzWyVzw5clc10gR2FrIGJvbGVoIGtvc29uZyBLZW50b2QnJShOLE0sTik7dGltZS5zbGVlcCgyKTtzZXRpbmdfeW50a3RzKCkKICAgIGVsaWYgeXRianRzID09JzEnOgogICAgICAgIHlvX25kYWtfdGF1X2tvX3RhbnlhX3NhaWEoKQogICAgZWxpZiB5dGJqdHMgPT0nMic6CiAgICAgICAgY2hlY2tfeW50a3RzKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ1xuICVzWyVzw5clc10gaW5wdXQgeWFuZyBiZW5lciclKE4sTSxOKTt0aW1lLnNsZWVwKDIpO3NldGluZ195bnRrdHMoKQoKIyBVc2VyIEFnZW50IGJhcnUKZGVmIHlvX25kYWtfdGF1X2tvX3RhbnlhX3NhaWEoKToKICAgIG9zLnN5c3RlbSgncm0gLXJmIFlOVEtUUy50eHQnKQogICAgcHJpbnQgJ1xuICVzKCVz4oCiJXMpIG5vdGljZSBtZTogY2FyaSBVc2VyIEFnZW50IGRpIGdvb2dsZSBjaHJvbWUuJyUoTixPLE4pCiAgICBwcmludCAnICglc8OXJXMpIGtldGlrIFVzZXIgQWdlbnQgYXRhdSBNeSBVc2VyIEFnZW50Li4uLlxuJyUoTSxOKQogICAgYW5qbmcgPSByYXdfaW5wdXQoJyBbJXM/JXNdIE1hc3VrYW4gVXNlciBBZ2VudCA6JXMgJyUoTyxOLEgpKQogICAgaWYgYW5qbmcgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1xuICVzWyVzw5clc10gR2FrIGJvbGVoIGtvc29uZyBLZW50b2QnJShOLE0sTik7eW9fbmRha190YXVfa29fdGFueWFfc2FpYSgpCiAgICB0cnk6CiAgICAgICAgb3BlbignWU5US1RTLnR4dCcsICd3Jykud3JpdGUoYW5qbmcpO3RpbWUuc2xlZXAoMikKICAgICAgICBqYWxhbignXG4gJXNbJXPinJMlc10gYmVyaGFzaWwgbWVuZ2dhbnRpIHVzZXIgYWdlbnQuLi4nJShOLEgsTikpCiAgICAgICAgcmF3X2lucHV0KCdcbiAgJXNbICVza2VtYmFsaSVzIF0nJShOLE8sTikpO21vY2hfeWF5YW4oKQogICAgZXhjZXB0OnBhc3MKCiMgQ2VrIFVzZXIgQWdlbnQKZGVmIGNoZWNrX3ludGt0cygpOgogICAgdHJ5OgogICAgICAgIHVzZXJfYWdlbnQgPSBvcGVuKCdZTlRLVFMudHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgCXVzZXJfYWdlbnQgPSAnJXMtJyUoTSkKICAgIGV4Y2VwdDogcGFzcwogICAgcHJpbnQgJ1xuICVzWyVzKyVzXSBVc2VyIEFnZW50IGFuZGEgOiAlcyVzJyUoTixPLE4sSCx1c2VyX2FnZW50KQogICAgcmF3X2lucHV0KCdcbiAgJXNbICVza2VtYmFsaSVzIF0nJShOLE8sTikpO21vY2hfeWF5YW4oKQoKIyBtdWxhaSBuZ2Vjcm90IGF3b2thd29rYXdva2thd29rCmNsYXNzIF9fY3JhY2tfXzoKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5pZCA9IFtdCgogICAgZGVmIHBsZXJyKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5hcGsgPSByYXdfaW5wdXQoJ1xuIFslcz8lc10gbWFzdWthbiBmaWxlIDogJyUoTyxOKSkKICAgICAgICAgICAgc2VsZi5pZCA9IG9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgICAgICAgICAgcHJpbnQgJ1xuIFslcyslc10gdG90YWwgaWQgLT4gJXMlcyVzJyAlKE8sTixNLGxlbihzZWxmLmlkKSxOKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcHJpbnQgJ1xuICVzWyVzw5clc10gRmlsZSBbJXMlcyVzXSB0aWRhayBhZGEsIGR1bXAgaWQgZHVsdSBicm8gY2VrIG5vbW9yIDEgc2FtcGFpIDQnJShOLE0sTixNLHNlbGYuYXBrLE4pO3RpbWUuc2xlZXAoMykKICAgICAgICAgICAgcmF3X2lucHV0KCdcbiAgJXNbICVza2VtYmFsaSVzIF0nJShOLE8sTikpO21vY2hfeWF5YW4oKQogICAgICAgIF9fX3lheWFuZ2FudGVuZ19fXyA9IHJhd19pbnB1dCgnIFslcz8lc10gYXBha2FoIGFuZGEgaW5naW4gbWVuZ2d1bmFrYW4ga2F0YSBzYW5kaSBtYW51YWw/IFtZL3RdOiAnJShPLE4pKQogICAgICAgIGlmIF9fX3lheWFuZ2FudGVuZ19fXyBpbiAoJ1knLCAneScpOgogICAgICAgICAgICBwcmludCAnXG4gJXNbJXMhJXNdIGd1bmFrYW4gLCAoa29tYSkgdW50dWsgcGVtaXNhaCBjb250b2ggOiBzYW5kaTEyMyxzYW5kaTEyMzQ1LGRsbC4gc2V0aWFwIGthdGEgbWluaW1hbCA2IGthcmFrdGVyIGF0YXUgbGViaWgnJShOLE0sTikKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIHB3ZWsgPSByYXdfaW5wdXQoJ1xuIFslcz8lc10gbWFzdWthbiBrYXRhIHNhbmRpIDogJyUoTyxOKSkKICAgICAgICAgICAgICAgIHByaW50ICcgWypdIGNyYWNrIGRlbmdhbiBzYW5kaSAtPiBbICVzJXMlcyBdJyAlIChNLCBwd2VrLCBOKQogICAgICAgICAgICAgICAgaWYgcHdlayA9PSAnJzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gJXNbJXPDlyVzXSBqYW5nYW4ga29zb25nIGJybyBrYXRhIHNhbmRpIG55YSclKE4sTSxOKQogICAgICAgICAgICAgICAgZWxpZiBsZW4ocHdlayk8PTU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xuICVzWyVzw5clc10ga2F0YSBzYW5kaSBtaW5pbWFsIDYga2FyYWt0ZXInJShOLE0sTikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZGVmIF9feWFuX18oeXNjPU5vbmUpOiAjIHljcyA9PiBZYXlhbiBzYXlhbmcgQ2luZHk6MwogICAgICAgICAgICAgICAgICAgICAgICBjaW4gPSByYXdfaW5wdXQoJ1xuIFsqXSBtZXRob2QgOiAnKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBjaW4gPT0gJyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gJXNbJXPDlyVzXSBqYW5nYW4ga29zb25nIGJybyclKE4sTSxOKTtzZWxmLl9feWFuX18oKQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGNpbiA9PSAnMSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyVzKyVzXSBoYXNpbCBPSyBkaXNpbXBhbiBrZSAtPiByZXN1bHRzL09LLSVzLSVzLSVzLnR4dCclKE8sTixoYSwgb3AsIHRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJyBbJXMrJXNdIGhhc2lsIENQIGRpc2ltcGFuIGtlIC0+IHJlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyUoTyxOLGhhLCBvcCwgdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyVzISVzXSBhbmRhIGJpc2EgbWVtYXRpa2FuIGRhdGEgc2VsdWxhciB1bnR1ayBtZW5qZWRhIHByb3NlcyBjcmFja1xuJyUoTSxOKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBZYXlhbkdhbnRlbmcobWF4X3dvcmtlcnM9MzApIGFzIChfX3lheWFuWERfXyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGlrZWggaW4gc2VsZi5pZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2ltb2NoaSA9IGlrZWguc3BsaXQoJzw9PicpWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3lheWFuWERfXy5zdWJtaXQoc2VsZi5fX2FwaV9fLCBraW1vY2hpLCB5c2MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDogcGFzcwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2lsKG9rLGNwKQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGNpbiA9PSAnMic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyVzKyVzXSBoYXNpbCBPSyBkaXNpbXBhbiBrZSAtPiByZXN1bHRzL09LLSVzLSVzLSVzLnR4dCclKE8sTixoYSwgb3AsIHRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJyBbJXMrJXNdIGhhc2lsIENQIGRpc2ltcGFuIGtlIC0+IHJlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyUoTyxOLGhhLCBvcCwgdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyVzISVzXSBhbmRhIGJpc2EgbWVtYXRpa2FuIGRhdGEgc2VsdWxhciB1bnR1ayBtZW5qZWRhIHByb3NlcyBjcmFja1xuJyUoTSxOKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBZYXlhbkdhbnRlbmcobWF4X3dvcmtlcnM9MzApIGFzIChfX3lheWFuWERfXyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGlrZWggaW4gc2VsZi5pZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2ltb2NoaSA9IGlrZWguc3BsaXQoJzw9PicpWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3lheWFuWERfXy5zdWJtaXQoc2VsZi5fX21iYXNpY19fLCBraW1vY2hpLCB5c2MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDogcGFzcwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2lsKG9rLGNwKQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGNpbiA9PSAnMyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyVzKyVzXSBoYXNpbCBPSyBkaXNpbXBhbiBrZSAtPiByZXN1bHRzL09LLSVzLSVzLSVzLnR4dCclKE8sTixoYSwgb3AsIHRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJyBbJXMrJXNdIGhhc2lsIENQIGRpc2ltcGFuIGtlIC0+IHJlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyUoTyxOLGhhLCBvcCwgdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyVzISVzXSBhbmRhIGJpc2EgbWVtYXRpa2FuIGRhdGEgc2VsdWxhciB1bnR1ayBtZW5qZWRhIHByb3NlcyBjcmFja1xuJyUoTSxOKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBZYXlhbkdhbnRlbmcobWF4X3dvcmtlcnM9MzApIGFzIChfX3lheWFuWERfXyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGlrZWggaW4gc2VsZi5pZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2ltb2NoaSA9IGlrZWguc3BsaXQoJzw9PicpWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3lheWFuWERfXy5zdWJtaXQoc2VsZi5fX21mYixfXywga2ltb2NoaSwgeXNjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6IHBhc3MKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNpbChvayxjcCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdcbiAlc1slc8OXJXNdIGlucHV0IHlhbmcgYmVuZXInJShOLE0sTik7c2VsZi5fX3lhbl9fKCkKICAgICAgICAgICAgICAgICAgICBwcmludCAnXG4gWyBwaWxpaCBtZXRob2QgbG9naW4gLSBzaWxhaGthbiBjb2JhIHNhdHXCsiBdXG4nCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJyBbJXMxJXNdLiBtZXRob2QgQVBJIChmYXN0KSclKE8sTikKICAgICAgICAgICAgICAgICAgICBwcmludCAnIFslczIlc10uIG1ldGhvZCBtYmFzaWMgKHNsb3cpJyUoTyxOKQogICAgICAgICAgICAgICAgICAgIHByaW50ICcgWyVzMyVzXS4gbWV0aG9kIG1vYmlsZSAoc3VwZXIgc2xvdyknJShPLE4pCiAgICAgICAgICAgICAgICAgICAgX195YW5fXyhwd2VrLnNwbGl0KCcsJykpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbGlmIF9fX3lheWFuZ2FudGVuZ19fXyBpbiAoJ1QnLCAndCcpOgogICAgICAgICAgICBwcmludCAnXG4gWyBwaWxpaCBtZXRob2QgbG9naW4gLSBzaWxhaGthbiBjb2JhIHNhdHXCsiBdXG4nCiAgICAgICAgICAgIHByaW50ICcgWyVzMSVzXS4gbWV0aG9kIEFQSSAoZmFzdCknJShPLE4pCiAgICAgICAgICAgIHByaW50ICcgWyVzMiVzXS4gbWV0aG9kIG1iYXNpYyAoc2xvdyknJShPLE4pCiAgICAgICAgICAgIHByaW50ICcgWyVzMyVzXS4gbWV0aG9kIG1vYmlsZSAoc3VwZXIgc2xvdyknJShPLE4pCiAgICAgICAgICAgIHNlbGYuX19wbGVyX18oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50ICdcbiAlc1slc8OXJXNdIHkvdCBnb2Jsb2shJyUoTixNLE4pO3RpbWUuc2xlZXAoMik7bW9jaF95YXlhbigpCiAgICAgICAgcmV0dXJuCgogICAgZGVmIF9fYXBpX18oc2VsZiwgdXNlciwgX195YW5fXyk6CiAgICAgICAgZ2xvYmFsIG9rLGNwLGxvb3AKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCdcciBbJXMqJXNdIFtjcmFja10gJXMvJXMgLT4gT0stOiVzIC0gQ1AtOiVzICclKE8sTixsb29wLGxlbihzZWxmLmlkKSxsZW4ob2spLGxlbihjcCkpKSwKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHcgaW4gX195YW5fXzoKICAgICAgICAgICAgcHcgPSBwdy5sb3dlcigpCiAgICAgICAgICAgIHRyeTogb3MubWtkaXIoJ3Jlc3VsdHMnKQogICAgICAgICAgICBleGNlcHQ6IHBhc3MKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAJX2tvbnRvbCA9IG9wZW4oJ1lOVEtUUy50eHQnLCAncicpLnJlYWQoKQogICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgCV9rb250b2wgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJwogICAgICAgICAgICBoZWFkZXJzXyA9IHsieC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMDAwMC4wLCAzMDAwMDAwMC4wKSksICJ4LWZiLXNpbS1obmkiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKSksICJ4LWZiLW5ldC1obmkiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKSksICJ4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSI6ICJFWENFTExFTlQiLCAieC1mYi1jb25uZWN0aW9uLXR5cGUiOiAiY2VsbC5DVFJhZGlvQWNjZXNzVGVjaG5vbG9neUhTRFBBIiwgInVzZXItYWdlbnQiOiBfa29udG9sLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsICJ4LWZiLWh0dHAtZW5naW5lIjogIkxpZ2VyIn0KICAgICAgICAgICAgYXBpID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luJwogICAgICAgICAgICBwYXJhbXMgPSB7J2FjY2Vzc190b2tlbic6ICczNTA2ODU1MzE3MjglN0M2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicsICAnZm9ybWF0JzogJ0pTT04nLCAnc2RrX3ZlcnNpb24nOiAnMicsICdlbWFpbCc6IHVzZXIsICdsb2NhbGUnOiAnZW5fVVMnLCAncGFzc3dvcmQnOiBwdywgJ3Nkayc6ICdpb3MnLCAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLCAnc2lnJzogJzNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2J30KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoYXBpLCBwYXJhbXM9cGFyYW1zLCBoZWFkZXJzPWhlYWRlcnNfKQogICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSAhPSAyMDA6CiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCdcciAlc1slcyElc10gSVAgdGVyYmxva2lyIGhpZHVwa2FuIG1vZGUgcGVzYXdhdCA1IGRldGlrJyUoTixNLE4pKSwKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgbG9vcCArPTEKICAgICAgICAgICAgICAgIHNlbGYuX19hcGlfXygpCiAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHJlc3BvbnNlLnRleHQgYW5kICdFQUFBJyBpbiByZXNwb25zZS50ZXh0OgogICAgICAgICAgICAgICAgcHJpbnQgJ1xyICAlcyogLS0+ICVzfCVzICAgICAgICAgICAgICAgICAlcycgJSAoSCx1c2VyLHB3LE4pCiAgICAgICAgICAgICAgICB3cnQgPSAnIFvinJNdICVzfCVzJyAlICh1c2VyLHB3KQogICAgICAgICAgICAgICAgb2suYXBwZW5kKHdydCkKICAgICAgICAgICAgICAgIG9wZW4oJ3Jlc3VsdHMvT0stJXMtJXMtJXMudHh0JyAlIChoYSwgb3AsIHRhKSwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcmVzcG9uc2UuanNvbigpWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBrb250b2wgPSBvcGVuKCcubWVtZWsudHh0JykucmVhZCgpCiAgICAgICAgICAgICAgICAgICAgY3BfdHRsID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcz9hY2Nlc3NfdG9rZW49JXMnJSh1c2VyLGtvbnRvbCkpLmpzb24oKVsnYmlydGhkYXknXQogICAgICAgICAgICAgICAgICAgIG1vbnRoLCBkYXksIHllYXIgPSBjcF90dGwuc3BsaXQoJy8nKQogICAgICAgICAgICAgICAgICAgIG1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQogICAgICAgICAgICAgICAgICAgIHByaW50ICdcciAgJXMqIC0tPiAlc3wlc3wlcyAlcyAlcyAgICAgJXMnICUgKEssdXNlcixwdyxkYXksbW9udGgseWVhcixOKQogICAgICAgICAgICAgICAgICAgIHdydCA9ICcgW8OXXSAlc3wlc3wlcyAlcyAlcycgJSAodXNlcixwdyxkYXksbW9udGgseWVhcikKICAgICAgICAgICAgICAgICAgICBjcC5hcHBlbmQod3J0KQogICAgICAgICAgICAgICAgICAgIG9wZW4oJ3Jlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyAlIChoYSwgb3AsIHRhKSwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICAgICAgICAgIG1vbnRoID0gJycKICAgICAgICAgICAgICAgICAgICBkYXkgICA9ICcnCiAgICAgICAgICAgICAgICAgICAgeWVhciAgPSAnJwogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgICAgICBwcmludCAnXHIgICVzKiAtLT4gJXN8JXMgICAgICAgICAgICAgICAgJXMnICUgKEssdXNlcixwdyxOKQogICAgICAgICAgICAgICAgd3J0ID0gJyBbw5ddICVzfCVzJyAlICh1c2VyLHB3KQogICAgICAgICAgICAgICAgY3AuYXBwZW5kKHdydCkKICAgICAgICAgICAgICAgIG9wZW4oJ3Jlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyAlIChoYSwgb3AsIHRhKSwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgbG9vcCArPSAxCgogICAgZGVmIF9fbWJhc2ljX18oc2VsZiwgdXNlciwgX195YW5fXyk6CiAgICAgICAgZ2xvYmFsIG9rLGNwLGxvb3AKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCdcciBbJXMqJXNdIFtjcmFja10gJXMvJXMgLT4gT0stOiVzIC0gQ1AtOiVzICclKE8sTixsb29wLGxlbihzZWxmLmlkKSxsZW4ob2spLGxlbihjcCkpKSwKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHcgaW4gX195YW5fXzoKICAgICAgICAgICAgcHcgPSBwdy5sb3dlcigpCiAgICAgICAgICAgIHRyeTogb3MubWtkaXIoJ3Jlc3VsdHMnKQogICAgICAgICAgICBleGNlcHQ6IHBhc3MKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAJX2tvbnRvbCA9IG9wZW4oJ1lOVEtUUy50eHQnLCAncicpLnJlYWQoKQogICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgCV9rb250b2wgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJwogICAgICAgICAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgICAgICAgICAgc2VzLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6Im1iYXNpYy5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50Ijpfa29udG9sLCJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pCiAgICAgICAgICAgIHAgPSBzZXMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iKQogICAgICAgICAgICBiID0gc2VzLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi5waHAiLCBkYXRhPXsiZW1haWwiOiB1c2VyLCAicGFzcyI6IHB3LCAibG9naW4iOiAic3VibWl0In0pCiAgICAgICAgICAgIGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgogICAgICAgICAgICAJa3VraSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQogICAgICAgICAgICAgICAgcHJpbnQgJ1xyICAlcyogLS0+ICVzfCVzfCVzICAgICAgICAgICAgICAgICAlcycgJSAoSCx1c2VyLHB3LGt1a2ksTikKICAgICAgICAgICAgICAgIHdydCA9ICcgW+Kck10gJXN8JXN8JXMnICUgKHVzZXIscHcsa3VraSkKICAgICAgICAgICAgICAgIG9rLmFwcGVuZCh3cnQpCiAgICAgICAgICAgICAgICBvcGVuKCdyZXN1bHRzL09LLSVzLSVzLSVzLnR4dCcgJSAoaGEsIG9wLCB0YSksICdhJykud3JpdGUoJyVzXG4nICUgd3J0KQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGtvbnRvbCA9IG9wZW4oJy5tZW1lay50eHQnKS5yZWFkKCkKICAgICAgICAgICAgICAgICAgICBjcF90dGwgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyclKHVzZXIsa29udG9sKSkuanNvbigpWydiaXJ0aGRheSddCiAgICAgICAgICAgICAgICAgICAgbW9udGgsIGRheSwgeWVhciA9IGNwX3R0bC5zcGxpdCgnLycpCiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBidWxhbl90dGxbbW9udGhdCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xyICAlcyogLS0+ICVzfCVzfCVzICVzICVzICAgICAlcycgJSAoSyx1c2VyLHB3LGRheSxtb250aCx5ZWFyLE4pCiAgICAgICAgICAgICAgICAgICAgd3J0ID0gJyBbw5ddICVzfCVzfCVzICVzICVzJyAlICh1c2VyLHB3LGRheSxtb250aCx5ZWFyKQogICAgICAgICAgICAgICAgICAgIGNwLmFwcGVuZCh3cnQpCiAgICAgICAgICAgICAgICAgICAgb3BlbigncmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnICUgKGhhLCBvcCwgdGEpLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgbW9udGggPSAnJwogICAgICAgICAgICAgICAgICAgIGRheSAgID0gJycKICAgICAgICAgICAgICAgICAgICB5ZWFyICA9ICcnCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgICAgIHByaW50ICdcciAgJXMqIC0tPiAlc3wlcyAgICAgICAgICAgICAgICAlcycgJSAoSyx1c2VyLHB3LE4pCiAgICAgICAgICAgICAgICB3cnQgPSAnIFvDl10gJXN8JXMnICUgKHVzZXIscHcpCiAgICAgICAgICAgICAgICBjcC5hcHBlbmQod3J0KQogICAgICAgICAgICAgICAgb3BlbigncmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnICUgKGhhLCBvcCwgdGEpLCAnYScpLndyaXRlKCclc1xuJyAlIHdydCkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBsb29wICs9IDEKCiAgICBkZWYgX19tZmJfXyhzZWxmLCB1c2VyLCBfX3lhbl9fKToKICAgICAgICBnbG9iYWwgb2ssY3AsbG9vcAogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyIFslcyolc10gW2NyYWNrXSAlcy8lcyAtPiBPSy06JXMgLSBDUC06JXMgJyUoTyxOLGxvb3AsbGVuKHNlbGYuaWQpLGxlbihvayksbGVuKGNwKSkpLAogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGZvciBwdyBpbiBfX3lhbl9fOgogICAgICAgICAgICBwdyA9IHB3Lmxvd2VyKCkKICAgICAgICAgICAgdHJ5OiBvcy5ta2RpcigncmVzdWx0cycpCiAgICAgICAgICAgIGV4Y2VwdDogcGFzcwogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgIAlfa29udG9sID0gb3BlbignWU5US1RTLnR4dCcsICdyJykucmVhZCgpCiAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICAJX2tvbnRvbCA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nCiAgICAgICAgICAgIHNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgICAgICAgICBzZXMuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoibS5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50Ijpfa29udG9sLCJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pCiAgICAgICAgICAgIHAgPSBzZXMuZ2V0KCJodHRwczovL20uZmFjZWJvb2suY29tIikKICAgICAgICAgICAgYiA9IHNlcy5wb3N0KCJodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luLnBocCIsIGRhdGE9eyJlbWFpbCI6IHVzZXIsICJwYXNzIjogcHcsICJsb2dpbiI6ICJzdWJtaXQifSkKICAgICAgICAgICAgaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CiAgICAgICAgICAgIAlrdWtpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pCiAgICAgICAgICAgICAgICBwcmludCAnXHIgICVzKiAtLT4gJXN8JXN8JXMgICAgICAgICAgICAgICAgICVzJyAlIChILHVzZXIscHcsa3VraSxOKQogICAgICAgICAgICAgICAgd3J0ID0gJyBb4pyTXSAlc3wlc3wlcycgJSAodXNlcixwdyxrdWtpKQogICAgICAgICAgICAgICAgb2suYXBwZW5kKHdydCkKICAgICAgICAgICAgICAgIG9wZW4oJ3Jlc3VsdHMvT0stJXMtJXMtJXMudHh0JyAlIChoYSwgb3AsIHRhKSwgJ2EnKS53cml0ZSgnJXNcbicgJSB3cnQpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAga29udG9sID0gb3BlbignLm1lbWVrLnR4dCcpLnJlYWQoKQogICAgICAgICAgICAgICAgICAgIGNwX3R0bCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzJyUodXNlcixrb250b2wpKS5qc29uKClbJ2JpcnRoZGF5J10KICAgICAgICAgICAgICAgICAgICBtb250aCwgZGF5LCB5ZWFyID0gY3BfdHRsLnNwbGl0KCcvJykKICAgICAgICAgICAgICAgICAgICBtb250aCA9IGJ1bGFuX3R0bFttb250aF0KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHIgICVzKiAtLT4gJXN8JXN8JXMgJXMgJXMgICAgICVzJyAlIChLLHVzZXIscHcsZGF5LG1vbnRoLHllYXIsTikKICAgICAgICAgICAgICAgICAgICB3cnQgPSAnIFvDl10gJXN8JXN8JXMgJXMgJXMnICUgKHVzZXIscHcsZGF5LG1vbnRoLHllYXIpCiAgICAgICAgICAgICAgICAgICAgY3AuYXBwZW5kKHdydCkKICAgICAgICAgICAgICAgICAgICBvcGVuKCdyZXN1bHRzL0NQLSVzLSVzLSVzLnR4dCcgJSAoaGEsIG9wLCB0YSksICdhJykud3JpdGUoJyVzXG4nICUgd3J0KQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgICAgICAgICBtb250aCA9ICcnCiAgICAgICAgICAgICAgICAgICAgZGF5ICAgPSAnJwogICAgICAgICAgICAgICAgICAgIHllYXIgID0gJycKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICAgICAgcHJpbnQgJ1xyICAlcyogLS0+ICVzfCVzICAgICAgICAgICAgICAgICVzJyAlIChLLHVzZXIscHcsTikKICAgICAgICAgICAgICAgIHdydCA9ICcgW8OXXSAlc3wlcycgJSAodXNlcixwdykKICAgICAgICAgICAgICAgIGNwLmFwcGVuZCh3cnQpCiAgICAgICAgICAgICAgICBvcGVuKCdyZXN1bHRzL0NQLSVzLSVzLSVzLnR4dCcgJSAoaGEsIG9wLCB0YSksICdhJykud3JpdGUoJyVzXG4nICUgd3J0KQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxvb3AgKz0gMQoKICAgIGRlZiBfX3BsZXJfXyhzZWxmKToKICAgICAgICB5YW4gPSByYXdfaW5wdXQoJ1xuIFsqXSBtZXRob2QgOiAnKQogICAgICAgIGlmIHlhbiA9PSAnJzoKICAgICAgICAgICAgcHJpbnQgJ1xuICVzWyVzw5clc10gamFuZ2FuIGtvc29uZyBicm8nJShOLE0sTik7c2VsZi5fX3BsZXJfXygpCiAgICAgICAgZWxpZiB5YW4gaW4gKCcxJywgJzAxJyk6CiAgICAgICAgICAgIHByaW50ICdcbiBbJXMrJXNdIGhhc2lsIE9LIGRpc2ltcGFuIGtlIC0+IHJlc3VsdHMvT0stJXMtJXMtJXMudHh0JyUoTyxOLGhhLCBvcCwgdGEpCiAgICAgICAgICAgIHByaW50ICcgWyVzKyVzXSBoYXNpbCBDUCBkaXNpbXBhbiBrZSAtPiByZXN1bHRzL0NQLSVzLSVzLSVzLnR4dCclKE8sTixoYSwgb3AsIHRhKQogICAgICAgICAgICBwcmludCAnXG4gWyVzISVzXSBhbmRhIGJpc2EgbWVtYXRpa2FuIGRhdGEgc2VsdWxhciB1bnR1ayBtZW5qZWRhIHByb3NlcyBjcmFja1xuJyUoTSxOKQogICAgICAgICAgICB3aXRoIFlheWFuR2FudGVuZyhtYXhfd29ya2Vycz0zMCkgYXMgKF9feWF5YW5YRF9fKToKICAgICAgICAgICAgCWZvciB5bnRrdHMgaW4gc2VsZi5pZDogIyBZbyBOZGFrIFRhdSBLb2sgVGFueWEgU2FpYQogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgdWlkLCBuYW1lID0geW50a3RzLnNwbGl0KCc8PT4nKQogICAgICAgICAgICAgICAgICAgICAgICB4eiA9IG5hbWUuc3BsaXQoJyAnKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oeHopID09IDMgb3IgbGVuKHh6KSA9PSA0IG9yIGxlbih4eikgPT0gNSBvciBsZW4oeHopID09IDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0rIjEyMyIsIHh6WzBdKyIxMjM0NSJdCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwd3ggPSBbbmFtZSwgeHpbMF0rIjEyMyIsIHh6WzBdKyIxMjM0NSJdCiAgICAgICAgICAgICAgICAgICAgICAgIF9feWF5YW5YRF9fLnN1Ym1pdChzZWxmLl9fYXBpX18sIHVpZCwgcHd4KQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgb3MucmVtb3ZlKHNlbGYuYXBrKQogICAgICAgICAgICBoYXNpbChvayxjcCkKICAgICAgICBlbGlmIHlhbiBpbiAoJzInLCAnMDInKToKICAgICAgICAgICAgcHJpbnQgJ1xuIFslcyslc10gaGFzaWwgT0sgZGlzaW1wYW4ga2UgLT4gcmVzdWx0cy9PSy0lcy0lcy0lcy50eHQnJShPLE4saGEsIG9wLCB0YSkKICAgICAgICAgICAgcHJpbnQgJyBbJXMrJXNdIGhhc2lsIENQIGRpc2ltcGFuIGtlIC0+IHJlc3VsdHMvQ1AtJXMtJXMtJXMudHh0JyUoTyxOLGhhLCBvcCwgdGEpCiAgICAgICAgICAgIHByaW50ICdcbiBbJXMhJXNdIGFuZGEgYmlzYSBtZW1hdGlrYW4gZGF0YSBzZWx1bGFyIHVudHVrIG1lbmplZGEgcHJvc2VzIGNyYWNrXG4nJShNLE4pCiAgICAgICAgICAgIHdpdGggWWF5YW5HYW50ZW5nKG1heF93b3JrZXJzPTMwKSBhcyAoX195YXlhblhEX18pOgogICAgICAgICAgICAJZm9yIHludGt0cyBpbiBzZWxmLmlkOiAjIFlvIE5kYWsgVGF1IEtvayBUYW55YSBTYWlhCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICB1aWQsIG5hbWUgPSB5bnRrdHMuc3BsaXQoJzw9PicpCiAgICAgICAgICAgICAgICAgICAgICAgIHh6ID0gbmFtZS5zcGxpdCgnICcpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbih4eikgPT0gMyBvciBsZW4oeHopID09IDQgb3IgbGVuKHh6KSA9PSA1IG9yIGxlbih4eikgPT0gNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSsiMTIzIiwgeHpbMF0rIjEyMzQ1Il0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB3eCA9IFtuYW1lLCB4elswXSsiMTIzIiwgeHpbMF0rIjEyMzQ1Il0KICAgICAgICAgICAgICAgICAgICAgICAgX195YXlhblhEX18uc3VibWl0KHNlbGYuX19tYmFzaWNfXywgdWlkLCBwd3gpCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgIGhhc2lsKG9rLGNwKQogICAgICAgIGVsaWYgeWFuIGluICgnMycsICcwMycpOgogICAgICAgICAgICBwcmludCAnXG4gWyVzKyVzXSBoYXNpbCBPSyBkaXNpbXBhbiBrZSAtPiByZXN1bHRzL09LLSVzLSVzLSVzLnR4dCclKE8sTixoYSwgb3AsIHRhKQogICAgICAgICAgICBwcmludCAnIFslcyslc10gaGFzaWwgQ1AgZGlzaW1wYW4ga2UgLT4gcmVzdWx0cy9DUC0lcy0lcy0lcy50eHQnJShPLE4saGEsIG9wLCB0YSkKICAgICAgICAgICAgcHJpbnQgJ1xuIFslcyElc10gYW5kYSBiaXNhIG1lbWF0aWthbiBkYXRhIHNlbHVsYXIgdW50dWsgbWVuamVkYSBwcm9zZXMgY3JhY2tcbiclKE0sTikKICAgICAgICAgICAgd2l0aCBZYXlhbkdhbnRlbmcobWF4X3dvcmtlcnM9MzApIGFzIChfX3lheWFuWERfXyk6CiAgICAgICAgICAgIAlmb3IgeW50a3RzIGluIHNlbGYuaWQ6ICMgWW8gTmRhayBUYXUgS29rIFRhbnlhIFNhaWEKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHVpZCwgbmFtZSA9IHludGt0cy5zcGxpdCgnPD0+JykKICAgICAgICAgICAgICAgICAgICAgICAgeHogPSBuYW1lLnNwbGl0KCcgJykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHh6KSA9PSAzIG9yIGxlbih4eikgPT0gNCBvciBsZW4oeHopID09IDUgb3IgbGVuKHh6KSA9PSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW25hbWUsIHh6WzBdKyIxMjMiLCB4elswXSsiMTIzNDUiXQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHd4ID0gW25hbWUsIHh6WzBdKyIxMjMiLCB4elswXSsiMTIzNDUiXQogICAgICAgICAgICAgICAgICAgICAgICBfX3lheWFuWERfXy5zdWJtaXQoc2VsZi5fX21mYl9fLCB1aWQsIHB3eCkKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgaGFzaWwob2ssY3ApCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50ICdcbiAlc1slc8OXJXNdIGlucHV0IHlhbmcgYmVuZXInJShOLE0sTik7c2VsZi5fX3BsZXJfXygpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgb3Muc3lzdGVtKCdnaXQgcHVsbCcpCiAgICBtb2NoX3lheWFuKCkK"))